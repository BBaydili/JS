<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" sizes="192x192" href="../images/JS.png">
    <title>Draggable Elements</title>
  <style>
    body { max-width: 440px; }
    #sample { overflow-x: auto; }
    #container {
      width: 100%;
      height: 400px;
      background: #eee;
      overflow: hidden;
    }
    #clickItem, #touchItem {
      position: relative;
      width: 20%; height: 20%;
      border-radius: 20%;
      font-size: 20px;
      text-align: center;
      user-select: none;
    }
    #touchItem {
      top: 15%; left: 60%;
      background: #4c8;
      border: 10px solid #2c6;
    }
    #clickItem {
      top: 40%; left: 20%;
      background: #48c;
      border: 10px solid #26c;
    }
    #clickItem:hover {
      cursor: move;
    }
  </style>
</head>

<body>
<h2 id=title></h2>
<div id="container">
  <div id="clickItem"><br>CLICK</div>
  <div id="touchItem"><br>TOUCH</div>
</div>
<p id=out></p>
<hr />
<b>Sample code</b>
<pre id=sample></pre>
<hr />
<p>Ref: <a href="https://www.kirupa.com/html5/drag.htm" 
   target="NewTab">Draggable Element in JS</a>
</p>

<script>
"use strict";
var count = 0, x0 = 0, y0 = 0;
function dragSt(e) {
    if (e.type == "touchstart") e = e.touches[0];
    count = 1; x0 = e.clientX; y0 = e.clientY;
}
function drag(e) {
    if (!count) return
    e.preventDefault(); count++;
    let typ = e.type, target = e.target
    if (typ == "touchmove") e = e.touches[0];
    let x = e.clientX - x0;
    let y = e.clientY - y0;
    let t = "translate("+x+"px,"+y+"px)"
    target.style.transform = t;
    out.innerText = typ+" -- "+count+" events -- "+t
}
function dragEnd(e) {
    let target = e.target, t = target.style.transform
    if (count > 1) {
      target.style.transform = ""
      let a = { transform:[t, "translate(0,0)"] }
      target.animate(a, 400)
    }
    let s = e.type+" -- "+count+" events -- "+t
    console.log(s); out.innerText = s
    count = 0; x0 = 0; y0 = 0;
}
    title.innerText = document.title;
    let c = clickItem
    c.addEventListener("mousedown", dragSt);
    c.addEventListener("mousemove", drag);
    c.addEventListener("mouseup", dragEnd);
    c = touchItem
    c.addEventListener("touchstart", dragSt);
    c.addEventListener("touchmove", drag);
    c.addEventListener("touchend", dragEnd);
    sample.innerText = drag.toString();
</script>
</body>
</html>
