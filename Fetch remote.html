<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Fetch Remote File </title>
</head>

<script>
"use strict";
function hide() {
    state.style.visibility = "hidden";
}
function show(v) {
    state.value = v; state.style.visibility = "inherit";
}
function report(t, n) {
    show("OK"); setTimeout(hide, 1000);
    output.innerHTML = "<pre>"+t+"</pre>";
    if (n == undefined) n = t;
    console.log(n);
}
function readText() {
    show("FT"); // FT = fetch text
    fetch(url.value)
      .then(r => r.text()) //response of fetch() is r
      .then(t => report(t, t.length+" chars"));  
      //response of text() is t
}
function readBlob() {
    show("FB");
    fetch(url.value)
      .then(r => r.blob())  //response
      .then(b => report("Binary: "+b.size+" bytes"));  //blob
}
</script>

<body>
<h2 id=title></h2>

<input type=text id=url value="test/test.txt">
<!--onChange="readText()"-->

<input type=button value="text" onClick="readText()">
<input type=button value="blob" onClick="readBlob()">
<input type=button id=state style="visibility: hidden">

<p id=output></p>
<hr />
<b>Sample code</b>
<p>
<pre>
function readText() {
    show("FT"); // FT = fetch text
    fetch(url.value)
      .then(r => r.text()) //response of fetch() is r
      .then(t => report(t, t.length+" chars"));  
      //response of text() is t
}
</pre>
<hr />

<script>
    const title = document.getElementById("title");
    title.innerHTML = document.title;
    const url = document.getElementById("url");
    const output = document.getElementById("output");
    const state = document.getElementById("state");
</script>

</body>
</html>
