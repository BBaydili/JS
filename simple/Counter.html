<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" sizes="192x192" href="/JS/images/JS.png">
    <title>Click Counter </title>

  <style>
    body { max-width: 440px; }
    #sample { overflow-x: auto; }
    #out {
        font-size: 18px;
        background: blue;
        color: white;
        text-align: center;
        padding: 10px;
    }
  </style>
</head>

<body>

<h2 id=title></h2>

<button id=button>count</button>

<p id=out></p>

<hr />
<b>Sample code</b>
<pre id=sample></pre>

<hr />
<p>Ref: 
<a href="https://www.w3schools.com/jsref/prop_win_localstorage.asp" 
   target="NewTab">Local Storage</a>
</p>

<script>
"use strict";
var counter
function report(n) {
    let s = "counter = "+n
    console.log(s); out.innerText = s
}
function init() {
    if (location.protocol.startsWith('http') 
          && localStorage) { //HTTP required
        button.onclick = count1
    } else { //global var
        counter = 0
        button.onclick = count2
    }
    button.onclick()
}
function count1() { //localStorage
    if (!localStorage.counter) 
         localStorage.counter = 0
    report(++localStorage.counter)
}
function count2() { //global var
    report(++counter)
}
    title.innerText = document.title
    sample.innerText = init+'\n'+count1+'\n'+count2
    out.innerText = "Starting..."
    init()
</script>

</body>
</html>
