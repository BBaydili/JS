<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <script src="Number.js"></script>
    <title>Numbers </title>
</head>

<script>
"use strict";
var stk = []; //stack of numbers
function pushNumber(x) {
    stk.push(x); display();
}
function rational() {
    const n = Number(num.value), d = Number(den.value);
    pushNumber(Make.rational(n, d));
}
function complex() {
    const r = Number(re.value), i = Number(im.value);
    pushNumber(Make.complex(r, i));
}
function add() {
    const a = stk.pop(), b = stk.pop();
    pushNumber(a.add(b));
}
function mult() {
    const a = stk.pop(), b = stk.pop();
    pushNumber(a.mult(b));
}
function inverse() {
    pushNumber(stk.pop().inverse());
}
function display() { //the stack
    let s = [], n = stk.length;
    while (n)
        s.push(stk[--n]);
    console.log(s.toString());
    out.innerText = s.join("\n");
}
</script>

<body>
<h2 id=title></h2>

num = <input type=number id=num style="width:40px" value=10>
den = <input type=number id=den style="width:40px" value=20>
<input type=button value="Rational" onClick="rational()">
<p />
real = <input type=number id=re style="width:40px" value=0>
img = <input type=number id=im style="width:40px" value=1>
<input type=button value="Complex" onClick="complex()">
<p />
Stack: 
<input type=button value="Add" onClick="add()">
<input type=button value="Multiply" onClick="mult()">
<input type=button value="Inverse" onClick="inverse()">
<input type=button value="Clear" onClick="stk=[]; display()">
<br>
<span id=out></span>
<hr />
<b>Sample code</b>
<p>
<pre>
class Make { //Factory methods to make numbers
    static whole(n) {
        return new Whole(n);
    }
    static rational(n, d) {
        if (d < 0) { n = -n; d = -d; }
        const g = Rational.gcd(n, d);
        if (g == d) return new Whole(n/g);
        else return new Rational(n/g, d/g);
    }
    static decimal(x) {
        if (x == Math.round(x)) return new Whole(x);
        else return new Decimal(x);
    }
    static complex(re, im) {
        if (im == 0) return Make.decimal(re);
        else return new Complex(re, im);
    }
}
</pre>
<hr />
<!--Ref: <a href="http://xxx" target=_blank>xxx</a-->
<script>
    title.innerText = document.title;
    rational(); complex();
</script>

</body>
</html>
